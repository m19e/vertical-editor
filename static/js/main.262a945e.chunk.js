(this["webpackJsonpvertical-editor"]=this["webpackJsonpvertical-editor"]||[]).push([[0],{122:function(e,t,n){e.exports=n(242)},127:function(e,t,n){},128:function(e,t,n){},240:function(e,t,n){},242:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(17),i=n.n(o),c=(n(127),n(128),n(19)),l=n(22),u=n(111),s=n(265),f=n(269),m=n(262),g=n(245),d=n(266),h=n(261),v=n(267),b=n(263),y=n(264),p=n(268),O=(n(240),{isMincho:!0,fontSize:24,charCount:30}),E=Object(h.a)((function(e){return Object(v.a)({root:{width:"100%",height:"100%",fontFamily:function(e){return e.isMincho?'"\u6e38\u660e\u671d\u4f53", "Yu Mincho", YuMincho, "Times New Roman", TimesNewRoman, serif':'"\u6e38\u30b4\u30b7\u30c3\u30af\u4f53", "Yu Gothic", YuGothic, Arial, sans-serif'},fontWeight:function(e){return e.isMincho?"normal":500}},textCenter:{textAlign:"center"}})})),S={scroll:{position:"absolute",bottom:"13%",height:"85%",width:"95%"}},C=function(){var e=Object(a.useState)((function(){return l.EditorState.createWithContent(l.ContentState.createFromText("\u672c\u6587\u3092\u5165\u529b"))})),t=Object(c.a)(e,2),n=t[0],o=t[1],i=Object(a.useState)(""),h=Object(c.a)(i,2),v=h[0],C=h[1],j=Object(a.useState)(""),N=Object(c.a)(j,2),x=N[0],w=N[1],k=Object(p.a)("myFormat",JSON.stringify(O)),K=Object(c.a)(k,3),M=K[0],A=K[1],T=(K[2],JSON.parse(M||JSON.stringify(O))),B=Object(a.useState)(T.charCount),J=Object(c.a)(B,2),F=J[0],z=J[1],L=Object(a.useState)(T.fontSize),R=Object(c.a)(L,2),D=R[0],Y=R[1],W=Object(a.createRef)(),G=Object(a.useState)(T.isMincho),P=Object(c.a)(G,2),H=P[0],I=P[1],U=Object(a.useState)(!1),$=Object(c.a)(U,2),q=$[0],Q=$[1],V=E({isMincho:H});Object(a.useEffect)((function(){var e=localStorage.getItem("myDraft");if(e){var t=JSON.parse(e),n=l.EditorState.createWithContent(Object(l.convertFromRaw)(JSON.parse(t.body))),a=n.getCurrentContent().getPlainText();w(t.title),a&&(C(a),ne(n))}}),[]);var X=Object(a.useState)(!0),Z=Object(c.a)(X,2),_=Z[0],ee=Z[1];Object(a.useEffect)((function(){document.title=(_?"":"*")+x+" | Clara Editor"}),[x,_]),Object(a.useEffect)((function(){var e=setTimeout((function(){_||te(n)}),5e3);return function(){return clearTimeout(e)}}),[n]),Object(a.useEffect)((function(){A(JSON.stringify({isMincho:H,fontSize:D,charCount:F}))}),[H,D,F]);var te=function(e){ee(!0);var t={title:x,body:JSON.stringify(Object(l.convertToRaw)(n.getCurrentContent()))};localStorage.setItem("myDraft",JSON.stringify(t))},ne=function(e){e.getCurrentContent().getPlainText()!==v&&(ee(!1),C(e.getCurrentContent().getPlainText()));var t=e.getCurrentContent().getBlockMap().first().getText().trim();w(t||"\u7121\u984c"),o(e)},ae=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n.getSelection().getAnchorKey(),a=n.getSelection(),r=JSON.parse(JSON.stringify(a)),o=r.anchorOffset,i=r.focusOffset,c=r.anchorKey,u=r.focusKey;o=e,i=e,c=t,u=t;var s=a.merge({anchorOffset:o,focusOffset:i,anchorKey:c,focusKey:u}),f=l.EditorState.forceSelection(n,s);ne(f)};return r.a.createElement("div",{className:V.root},r.a.createElement(u.Scrollbars,{autoHide:!0,autoHideTimeout:1e3,autoHideDuration:500,ref:W,onWheel:function(e){var t,n,a=(null===(t=W.current)||void 0===t?void 0:t.getScrollLeft())||0;null===(n=W.current)||void 0===n||n.scrollLeft(a-e.deltaY)},style:S.scroll},r.a.createElement(s.a,{display:"flex"},r.a.createElement(s.a,{m:"auto"},r.a.createElement("div",{className:"tate",style:{fontSize:D+"px",height:F*D+"px"}},r.a.createElement(l.Editor,{editorState:n,onChange:ne,keyBindingFn:function(e){if("Tab"===e.key)return e.preventDefault(),null;if(e.ctrlKey&&"s"===e.key)return e.preventDefault(),te(n),function(e){var t=document.createElement("a");t.href=URL.createObjectURL(new Blob([e],{type:"text/plain"})),t.download="draft-".concat(Date.now(),".txt"),t.style.display="none",document.body.appendChild(t),t.click(),document.body.removeChild(t)}(n.getCurrentContent().getPlainText()),null;if(e.key.includes("Arrow")){e.preventDefault();var t=n.getSelection(),a=t.getAnchorOffset(),r=n.getCurrentContent(),o=t.getAnchorKey(),i=r.getBlockForKey(o).getLength();switch(console.log(JSON.stringify(t,null,4)),e.key){case"ArrowUp":if(0===a){var c=r.getKeyBefore(o);if(!c)return null;var u=r.getBlockForKey(c).getLength();return ae(u,c),null}return ae(a-1),null;case"ArrowDown":if(a===i){var s=r.getKeyAfter(o);return s?(ae(0,s),null):null}return ae(a+1),null;case"ArrowRight":if(a>F)return ae(a-F,o),null;var f=r.getKeyBefore(o);if(!f)return"move-selection-to-start-of-block";var m=r.getBlockForKey(f).getLength(),g=Math.floor(m/F)*F+Math.min(a%F,m%F);return ae(g,f),null;case"ArrowLeft":if(i>F){if(i>=a+F)return ae(a+F,o),null;var d=r.getKeyAfter(o);if(!d)return"move-selection-to-end-of-block";var h=r.getBlockForKey(d).getLength();return ae(Math.min(a%F,h),d),null}var v=r.getKeyAfter(o);if(!v)return"move-selection-to-end-of-block";var b=r.getBlockForKey(v).getLength();return ae(b<a?b:a,v),null}}return Object(l.getDefaultKeyBinding)(e)}})))),r.a.createElement(f.a,{position:"fixed",color:"inherit",style:{top:"auto",bottom:0},className:"appbar"},r.a.createElement("div",{style:{margin:"auto",padding:"8px"},onMouseOver:function(){return Q(!0)}},r.a.createElement(m.a,{className:"bgroup",orientation:"vertical",color:"inherit","aria-label":"vertical contained primary button group",variant:"text"},r.a.createElement(g.a,{size:"small",variant:"text",disabled:!0}),r.a.createElement("span",{className:V.textCenter},H?"\u660e\u671d\u4f53":"\u30b4\u30b7\u30c3\u30af\u4f53"),r.a.createElement(d.a,{in:q,timeout:700},r.a.createElement(g.a,{size:"small",variant:"text",onClick:function(){return I(!H)},className:"control",style:{fontFamily:H?'"\u6e38\u30b4\u30b7\u30c3\u30af\u4f53", "Yu Gothic", YuGothic, Arial, sans-serif':'"\u6e38\u660e\u671d\u4f53", "Yu Mincho", YuMincho, "Times New Roman", TimesNewRoman, serif',fontWeight:H?500:"normal",padding:"0 8px"}},H?"\u30b4\u30b7\u30c3\u30af\u4f53":"\u660e\u671d\u4f53"))),r.a.createElement(m.a,{className:"bgroup",orientation:"vertical",color:"inherit","aria-label":"vertical contained primary button group",variant:"text"},r.a.createElement(g.a,{size:"small",variant:"text",onClick:function(){return Y(D+4)},disabled:D>=50},r.a.createElement(b.a,{className:"control"})),r.a.createElement("span",null,"\u6587\u5b57\u30b5\u30a4\u30ba ",D),r.a.createElement(g.a,{size:"small",variant:"text",onClick:function(){return Y(D-4)},disabled:D<=8},r.a.createElement(y.a,{className:"control"}))),r.a.createElement(m.a,{className:"bgroup",orientation:"vertical",color:"inherit","aria-label":"vertical contained primary button group",variant:"text"},r.a.createElement(g.a,{size:"small",variant:"text",onClick:function(){return z(F+1)},disabled:F>=50},r.a.createElement(b.a,{className:"control"})),r.a.createElement("span",null,"\u5b57\u6570 ",F),r.a.createElement(g.a,{size:"small",variant:"text",onClick:function(){return z(F-1)},disabled:F<=3},r.a.createElement(y.a,{className:"control"})))))))};var j=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(C,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(j,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[122,1,2]]]);
//# sourceMappingURL=main.262a945e.chunk.js.map