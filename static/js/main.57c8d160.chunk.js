(this["webpackJsonpvertical-editor"]=this["webpackJsonpvertical-editor"]||[]).push([[0],{121:function(e,t,n){e.exports=n(241)},126:function(e,t,n){},127:function(e,t,n){},239:function(e,t,n){},241:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(17),i=n.n(o),c=(n(126),n(127),n(21)),l=n(27),u=n(111),s=n(263),f=n(266),m=n(260),g=n(244),v=n(264),d=n(259),h=n(265),b=n(261),y=n(262),p=(n(239),Object(d.a)((function(e){return Object(h.a)({root:{width:"100%",height:"100%",fontFamily:function(e){return e.isMincho?'"\u6e38\u660e\u671d\u4f53", "Yu Mincho", YuMincho, "Times New Roman", TimesNewRoman, serif':'"\u6e38\u30b4\u30b7\u30c3\u30af\u4f53", "Yu Gothic", YuGothic, Arial, sans-serif'},fontWeight:function(e){return e.isMincho?"normal":500}},textCenter:{textAlign:"center"}})}))),E={scroll:{position:"absolute",bottom:"13%",height:"85%",width:"95%"}},O=function(){var e=Object(a.useState)((function(){return l.EditorState.createEmpty()})),t=Object(c.a)(e,2),n=t[0],o=t[1],i=Object(a.useState)(""),d=Object(c.a)(i,2),h=d[0],O=d[1],S=Object(a.useState)(""),j=Object(c.a)(S,2),N=j[0],k=j[1],w=Object(a.useState)(30),x=Object(c.a)(w,2),C=x[0],K=x[1],A=Object(a.useState)(24),M=Object(c.a)(A,2),T=M[0],B=M[1],F=Object(a.createRef)(),J=Object(a.useState)(!0),L=Object(c.a)(J,2),Y=L[0],D=L[1],R=Object(a.useState)(!1),z=Object(c.a)(R,2),W=z[0],G=z[1],H=p({isMincho:Y});Object(a.useEffect)((function(){var e=localStorage.getItem("myDraft");if(e){var t=JSON.parse(e),n=l.EditorState.createWithContent(Object(l.convertFromRaw)(JSON.parse(t.body))),a=n.getCurrentContent().getPlainText();k(t.title),O(a),Q(n)}}),[]);var I=Object(a.useState)(!0),P=Object(c.a)(I,2),U=P[0],$=P[1];Object(a.useEffect)((function(){document.title=(U?"":"*")+N}),[N,U]),Object(a.useEffect)((function(){var e=setTimeout((function(){U||q(n)}),5e3);return function(){return clearTimeout(e)}}),[n]);var q=function(e){$(!0);var t={title:N,body:JSON.stringify(Object(l.convertToRaw)(n.getCurrentContent()))};localStorage.setItem("myDraft",JSON.stringify(t))},Q=function(e){e.getCurrentContent().getPlainText()!==h&&($(!1),O(e.getCurrentContent().getPlainText()));var t=e.getCurrentContent().getBlockMap().first().getText().trim();k(t||"\u7121\u984c"),o(e)},V=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n.getSelection().getAnchorKey(),a=n.getSelection(),r=JSON.parse(JSON.stringify(a)),o=r.anchorOffset,i=r.focusOffset,c=r.anchorKey,u=r.focusKey;o=e,i=e,c=t,u=t;var s=a.merge({anchorOffset:o,focusOffset:i,anchorKey:c,focusKey:u}),f=l.EditorState.forceSelection(n,s);Q(f)};return r.a.createElement("div",{className:H.root},r.a.createElement(u.Scrollbars,{autoHide:!0,autoHideTimeout:1e3,autoHideDuration:500,ref:F,onWheel:function(e){var t,n,a=(null===(t=F.current)||void 0===t?void 0:t.getScrollLeft())||0;null===(n=F.current)||void 0===n||n.scrollLeft(a-e.deltaY)},style:E.scroll},r.a.createElement(s.a,{display:"flex"},r.a.createElement(s.a,{m:"auto"},r.a.createElement("div",{className:"tate",style:{fontSize:T+"px",height:C*T+"px"}},r.a.createElement(l.Editor,{editorState:n,onChange:Q,keyBindingFn:function(e){if("Tab"===e.key)return e.preventDefault(),null;if(e.ctrlKey&&"s"===e.key)return e.preventDefault(),q(n),null;if(e.key.includes("Arrow")){e.preventDefault();var t=n.getSelection(),a=t.getAnchorOffset(),r=n.getCurrentContent(),o=t.getAnchorKey(),i=r.getBlockForKey(o).getLength();switch(console.log(JSON.stringify(t,null,4)),e.key){case"ArrowUp":if(0===a){var c=r.getKeyBefore(o);if(!c)return null;var u=r.getBlockForKey(c).getLength();return V(u,c),null}return V(a-1),null;case"ArrowDown":if(a===i){var s=r.getKeyAfter(o);return s?(V(0,s),null):null}return V(a+1),null;case"ArrowRight":if(a>C)return V(a-C,o),null;var f=r.getKeyBefore(o);if(!f)return"move-selection-to-start-of-block";var m=r.getBlockForKey(f).getLength(),g=Math.floor(m/C)*C+Math.min(a%C,m%C);return V(g,f),null;case"ArrowLeft":if(i>C){if(i>=a+C)return V(a+C,o),null;var v=r.getKeyAfter(o);if(!v)return"move-selection-to-end-of-block";var d=r.getBlockForKey(v).getLength();return V(Math.min(a%C,d),v),null}var h=r.getKeyAfter(o);if(!h)return"move-selection-to-end-of-block";var b=r.getBlockForKey(h).getLength();return V(b<a?b:a,h),null}}return Object(l.getDefaultKeyBinding)(e)}})))),r.a.createElement(f.a,{position:"fixed",color:"inherit",style:{top:"auto",bottom:0},className:"appbar"},r.a.createElement("div",{style:{margin:"auto",padding:"8px"},onMouseOver:function(){return G(!0)},onMouseLeave:function(){return G(!1)}},r.a.createElement(m.a,{className:"bgroup",orientation:"vertical",color:"inherit","aria-label":"vertical contained primary button group",variant:"text"},r.a.createElement(g.a,{size:"small",variant:"text",disabled:!0}),r.a.createElement("span",{className:H.textCenter},Y?"\u660e\u671d\u4f53":"\u30b4\u30b7\u30c3\u30af\u4f53"),r.a.createElement(v.a,{in:W,timeout:700},r.a.createElement(g.a,{size:"small",variant:"text",onClick:function(){return D(!Y)},className:"control",style:{fontFamily:Y?'"\u6e38\u30b4\u30b7\u30c3\u30af\u4f53", "Yu Gothic", YuGothic, Arial, sans-serif':'"\u6e38\u660e\u671d\u4f53", "Yu Mincho", YuMincho, "Times New Roman", TimesNewRoman, serif',fontWeight:Y?500:"normal",padding:"0 8px"}},Y?"\u30b4\u30b7\u30c3\u30af\u4f53":"\u660e\u671d\u4f53"))),r.a.createElement(m.a,{className:"bgroup",orientation:"vertical",color:"inherit","aria-label":"vertical contained primary button group",variant:"text"},r.a.createElement(g.a,{size:"small",variant:"text",onClick:function(){return B(T+4)},disabled:T>=50},r.a.createElement(b.a,{className:"control"})),r.a.createElement("span",null,"\u6587\u5b57\u30b5\u30a4\u30ba ",T),r.a.createElement(g.a,{size:"small",variant:"text",onClick:function(){return B(T-4)},disabled:T<=8},r.a.createElement(y.a,{className:"control"}))),r.a.createElement(m.a,{className:"bgroup",orientation:"vertical",color:"inherit","aria-label":"vertical contained primary button group",variant:"text"},r.a.createElement(g.a,{size:"small",variant:"text",onClick:function(){return K(C+1)},disabled:C>=50},r.a.createElement(b.a,{className:"control"})),r.a.createElement("span",null,"\u5b57\u6570 ",C),r.a.createElement(g.a,{size:"small",variant:"text",onClick:function(){return K(C-1)},disabled:C<=3},r.a.createElement(y.a,{className:"control"})))))))};var S=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(O,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(S,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[121,1,2]]]);
//# sourceMappingURL=main.57c8d160.chunk.js.map